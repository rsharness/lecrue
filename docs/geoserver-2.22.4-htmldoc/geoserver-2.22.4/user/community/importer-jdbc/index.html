
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Importer JDBC storage &#8212; GeoServer 2.22.4 User Manual</title>
    <link rel="stylesheet" href="../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="../../_static/blueprint/print.css" type="text/css" media="print" /> 
    <!--[if IE]>
    <link rel="stylesheet" href="../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
    <![endif]-->
    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/default.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/geoserver.ico"/>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="JDBCConfig" href="../jdbcconfig/index.html" />
    <link rel="prev" title="SAP HANA" href="../hana/index.html" /> 
  </head><body class="community/importer-jdbc/index">
<div id="header" class="selfclear">
    <div class="wrap selfclear">
        <div id="logo"><a href="http://geoserver.org">GeoServer</a></div>
        <ul id="top-nav">
            <li class="first"><a href="http://geoserver.org/about/">About</a></li>
            <li><a href="http://geoserver.org/blog">Blog</a></li>
            <li><a href="http://geoserver.org/download/">Download</a></li>
            <li><a href="https://docs.geoserver.org/">Documentation</a></li>
        </ul>

        <form id="quick-search" action="../../search.html" method="get">
            <fieldset>
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
                <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" size="20" tabindex="3" placeholder="Search User Manual&hellip;" />
                <input id="quick-search-submit" type="image" value="Search" src="../../_static/chrome/search_icon_green.png" />
            </fieldset>
        </form>
    </div><!-- /.wrap -->
</div><!-- /#header -->
    <div id="main">
      <div class="wrap selfclear">
        <div id="content-left" class="content-border"></div>
        <div id="content">
        
<ul id="breadcrumbs">
  
    <li><a href="../../index.html">GeoServer 2.22.4 User Manual</a> &raquo;</li>
        <li><a href="../index.html" accesskey="U">Community modules</a> &raquo;</li>
    <li>Importer JDBC storage</li>
</ul>
        
<ul id="relatedlinks" class="selfclear">
  <li class="first"><a href="../jdbcconfig/index.html" title="JDBCConfig" accesskey="N">Next</a></li>
  <li>
    <a href="../hana/index.html" title="SAP HANA" accesskey="P">Previous</a>|
  </li>
</ul>
          
  <div class="section" id="importer-jdbc-storage">
<span id="community-importer-jdbc"></span><h1>Importer JDBC storage<a class="headerlink" href="#importer-jdbc-storage" title="Permalink to this headline">¶</a></h1>
<p>This plugin allows sharing the state of imports in a relational database supported by GeoTools.
Compared to the default in-memory storage, this helps in two ways:</p>
<ul class="simple">
<li><p>The state of the imports is persisted and survives restarts</p></li>
<li><p>If an external database, such as PostgreSQL/PostGIS, is used, then it’s possible to run multiple
imports on different GeoServer nodes in load balancing and get a consolidated view of their state</p></li>
</ul>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>The module zip just need to be unpacked in the GeoServer <code class="docutils literal notranslate"><span class="pre">WEB-INF\lib</span></code>.
On startup the module will create by default a H2 database in a “importer” folder
inside the data directory, as well as a configuration file at <code class="docutils literal notranslate"><span class="pre">${GEOSERVER_DATA_DIR}/jdbc-import-store.properties</span></code>.</p>
<p>The property file can be modified to point to an external database, for example, the following
contents are suitable for a PostGIS database (PostGIS extensions mandatory, even if not used):</p>
<div class="highlight-scss notranslate"><div class="highlight"><pre><span></span><span class="nt">dbtype</span><span class="o">=</span><span class="nt">postgis</span>
<span class="nt">user</span><span class="o">=</span><span class="nt">myUserName</span>
<span class="nt">passwd</span><span class="o">=</span><span class="nt">myPassword</span>
<span class="nt">database</span><span class="o">=</span><span class="nt">databaseName</span>
<span class="nt">port</span><span class="o">=</span><span class="nt">5432</span>
<span class="nt">host</span><span class="o">=</span><span class="nt">localhost</span>
<span class="nt">schema</span><span class="o">=</span><span class="nt">public</span>
</pre></div>
</div>
<p>On connection the code will create one table and the suitable indexes to track the imports.
In case the user above is not allowed to create tables, the following SQL
statement can be used (adapt to the specific database):</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">public</span><span class="p">.</span><span class="n">import_context</span>
<span class="p">(</span>
  <span class="n">fid</span> <span class="nb">serial</span><span class="p">,</span>
  <span class="n">context</span> <span class="nb">text</span><span class="p">,</span>
  <span class="n">created</span> <span class="k">timestamp</span><span class="p">,</span>
  <span class="n">updated</span> <span class="k">timestamp</span><span class="p">,</span>
  <span class="ss">&quot;user&quot;</span> <span class="nb">character</span> <span class="nb">varying</span><span class="p">,</span>
  <span class="k">state</span> <span class="nb">character</span> <span class="nb">varying</span><span class="p">,</span>
  <span class="k">CONSTRAINT</span> <span class="n">import_context_pkey</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">fid</span><span class="p">)</span>
<span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">import_context_state</span> <span class="k">ON</span> <span class="n">import_context</span><span class="p">(</span><span class="k">state</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">import_context_user</span> <span class="k">ON</span> <span class="n">import_context</span><span class="p">(</span><span class="ss">&quot;user&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The store has been tested with H2 and Postgresql with PostGIS extensions, it may work
with other relational databases too assuming that they have a corresponding GeoTools data store
plugin installed and the database is not changing the name of the columns (Oracle will most
likely not work).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With some light extra development and testing the code could be extended to save the status
of imports in any GeoTools supported store, e.g., SOLR, MongoDB.</p>
</div>
</div>
</div>


        <div class="selfclear pagination-nav">
            <div class="leftwise"><strong>Previous</strong>: <a href="../hana/index.html" title="previous chapter">SAP HANA</a></div>
            <div class="rightwise"><strong>Next</strong>: <a href="../jdbcconfig/index.html" title="next chapter">JDBCConfig</a></div>
        </div>
        </div><!-- /#content> -->
        <div id="content-right" class="content-border"></div>
        
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix"><a href="../../index.html">Table Of Contents</a></h3>
        <ul>
<li><a class="reference internal" href="#">Importer JDBC storage</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="../hana/index.html" title="previous chapter">SAP HANA</a></li>
            <li>Next: <a href="../jdbcconfig/index.html" title="next chapter">JDBCConfig</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
        
        <li><a href="https://github.com/geoserver/geoserver/tree/main/doc/en/user/source/community/importer-jdbc/index.rst">Edit</a></li>
        </ul>
        </div>
      <div class="section">
        <h3>Known GeoServer issues</h3>
        <ul class="this-page-menu">
          <li><a href="https://osgeo-org.atlassian.net/projects/GEOS/summary">Jira issue tracker</a></li>
        </ul>
      </div>
  </div><!-- /#sidebar -->
    </div><!-- /.wrap> -->
  </div><!-- /#main -->
<div id="footer">
    <div class="wrap">
        &copy; Copyright 2023, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
        Last updated on Jun 18, 2023.
        Created using <a href="http://www.sphinx-doc.org/">Sphinx</a>.
    </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>