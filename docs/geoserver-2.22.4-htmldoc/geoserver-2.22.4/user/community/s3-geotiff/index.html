
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>S3 Support for GeoTiff &#8212; GeoServer 2.22.4 User Manual</title>
    <link rel="stylesheet" href="../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="../../_static/blueprint/print.css" type="text/css" media="print" /> 
    <!--[if IE]>
    <link rel="stylesheet" href="../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
    <![endif]-->
    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/default.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/geoserver.ico"/>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="SAMLv2 Authentication Filter" href="../saml/index.html" />
    <link rel="prev" title="A Remote “Gdal Contour” Process Binding Example" href="../remote-wps/running_example.html" /> 
  </head><body class="community/s3-geotiff/index">
<div id="header" class="selfclear">
    <div class="wrap selfclear">
        <div id="logo"><a href="http://geoserver.org">GeoServer</a></div>
        <ul id="top-nav">
            <li class="first"><a href="http://geoserver.org/about/">About</a></li>
            <li><a href="http://geoserver.org/blog">Blog</a></li>
            <li><a href="http://geoserver.org/download/">Download</a></li>
            <li><a href="https://docs.geoserver.org/">Documentation</a></li>
        </ul>

        <form id="quick-search" action="../../search.html" method="get">
            <fieldset>
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
                <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" size="20" tabindex="3" placeholder="Search User Manual&hellip;" />
                <input id="quick-search-submit" type="image" value="Search" src="../../_static/chrome/search_icon_green.png" />
            </fieldset>
        </form>
    </div><!-- /.wrap -->
</div><!-- /#header -->
    <div id="main">
      <div class="wrap selfclear">
        <div id="content-left" class="content-border"></div>
        <div id="content">
        
<ul id="breadcrumbs">
  
    <li><a href="../../index.html">GeoServer 2.22.4 User Manual</a> &raquo;</li>
        <li><a href="../index.html" accesskey="U">Community modules</a> &raquo;</li>
    <li>S3 Support for GeoTiff</li>
</ul>
        
<ul id="relatedlinks" class="selfclear">
  <li class="first"><a href="../saml/index.html" title="SAMLv2 Authentication Filter" accesskey="N">Next</a></li>
  <li>
    <a href="../remote-wps/running_example.html" title="A Remote “Gdal Contour” Process Binding Example" accesskey="P">Previous</a>|
  </li>
</ul>
          
  <div class="section" id="s3-support-for-geotiff">
<span id="s3-geotiff"></span><h1>S3 Support for GeoTiff<a class="headerlink" href="#s3-support-for-geotiff" title="Permalink to this headline">¶</a></h1>
<p>Support for GeoTiffs hosted on Amazon S3 or on other Amazon S3 compatible services, via a custom GeoTools GridFormat.</p>
<div class="section" id="what-s-in-the-box">
<h2>What’s in the Box?<a class="headerlink" href="#what-s-in-the-box" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><cite>org.geotools.s3.geotiff</cite>: S3 GeoTiff Format/FormatFactory/GridCoverage2dReader implementations
based off of the GeoTiff versions. Only very minor changes to their parent classes.</p></li>
<li><p><cite>org.geotools.s3.cache</cite>: Very basic caching of images from S3 based off of EhCache.</p></li>
<li><p><cite>S3ImageInputStreamImpl</cite>: An implementation of ImageInputStream from JAI for reading imagery
from S3. This class mainly contains the logic of stream position and chunking, while the cache
package handles the actual S3 reads.</p></li>
</ul>
</div>
<div class="section" id="geotiffs-hosted-on-amazon-s3">
<h2>GeoTiffs hosted on Amazon S3<a class="headerlink" href="#geotiffs-hosted-on-amazon-s3" title="Permalink to this headline">¶</a></h2>
<div class="section" id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>Almost all configuration is currently done via system properties. For caching configuration, please
see the class <cite>org.geotools.s3.cache.CacheConfig</cite>.</p>
</div>
<div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<p>S3GeoTiff uses s3:// style URLs to operate. The only twist is that S3GeoTiff uses query string
parameters to configure certain parameters</p>
<ul class="simple">
<li><p><cite>awsRegion</cite>: Controls the region to use when connecting. Needs to be in Java enum format eg. US_WEST_2</p></li>
<li><p><cite>useAnon</cite>: Controls whether to authenticate anonymously. This needs to be used to connect anonymous buckets</p></li>
</ul>
<p>For example:</p>
<p>s3://landsat-pds/L8/001/002/LC80010022016230LGN00/LC80010022016230LGN00_B1.TIF?useAnon=true&amp;awsRegion=US_WEST_2</p>
</div>
<div class="section" id="credentials">
<h3>Credentials<a class="headerlink" href="#credentials" title="Permalink to this headline">¶</a></h3>
<p>Unless <cite>S3_USE_ANON</cite> is set to true the
[default AWS client credential chain](<a class="reference external" href="http://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/credentials.html#using-the-default-credential-provider-chain">http://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/credentials.html#using-the-default-credential-provider-chain</a>) is used.</p>
</div>
</div>
<div class="section" id="geotiffs-hosted-on-other-amazon-s3-compatible-services">
<h2>GeoTiffs hosted on other Amazon S3 compatible services<a class="headerlink" href="#geotiffs-hosted-on-other-amazon-s3-compatible-services" title="Permalink to this headline">¶</a></h2>
<p>Access geotiffs on S3 servers not hosted on Amazon,  e.g. <a class="reference external" href="https://www.minio.io/">https://www.minio.io/</a> or other. There are 2 steps to access the geofiff files. configure the server in the s3.properties file and then you can use the prefix as an alias to access the file in the S3GeoTiff module for geoserver.</p>
<div class="section" id="id1">
<h3>Configuration<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>The S3 endpoints are configured in the s3.properties file. The following properties are needed for each endpoint. The prefix <cite>alias</cite> can be any value you choose in order to configure  multiple endpoints.</p>
<ul class="simple">
<li><p><cite>alias.s3.endpoint</cite>=http://your-s3-server/</p></li>
<li><p><cite>alias.s3.user</cite>=your-user-name</p></li>
<li><p><cite>alias.s3.password</cite>=your-password</p></li>
</ul>
</div>
<div class="section" id="id2">
<h3>Usage<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Using the above configuration in the s3.properties file, the files on the S3 service can be accessed with the following URL style configuration in geoserver:</p>
<blockquote>
<div><p>alias://bucketname/filename.tiff</p>
</div></blockquote>
<ul class="simple">
<li><p><cite>alias</cite>: The prefix you choose for the configuration of the endpoint</p></li>
<li><p><cite>bucketname</cite>: The path to the folder where the geotiffs are stored</p></li>
<li><p><cite>filename.tif</cite>: The name of the geotiff file</p></li>
</ul>
</div>
</div>
</div>


        <div class="selfclear pagination-nav">
            <div class="leftwise"><strong>Previous</strong>: <a href="../remote-wps/running_example.html" title="previous chapter">A Remote “Gdal Contour” Process Binding Example</a></div>
            <div class="rightwise"><strong>Next</strong>: <a href="../saml/index.html" title="next chapter">SAMLv2 Authentication Filter</a></div>
        </div>
        </div><!-- /#content> -->
        <div id="content-right" class="content-border"></div>
        
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix"><a href="../../index.html">Table Of Contents</a></h3>
        <ul>
<li><a class="reference internal" href="#">S3 Support for GeoTiff</a><ul>
<li><a class="reference internal" href="#what-s-in-the-box">What’s in the Box?</a></li>
<li><a class="reference internal" href="#geotiffs-hosted-on-amazon-s3">GeoTiffs hosted on Amazon S3</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#credentials">Credentials</a></li>
</ul>
</li>
<li><a class="reference internal" href="#geotiffs-hosted-on-other-amazon-s3-compatible-services">GeoTiffs hosted on other Amazon S3 compatible services</a><ul>
<li><a class="reference internal" href="#id1">Configuration</a></li>
<li><a class="reference internal" href="#id2">Usage</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="../remote-wps/running_example.html" title="previous chapter">A Remote “Gdal Contour” Process Binding Example</a></li>
            <li>Next: <a href="../saml/index.html" title="next chapter">SAMLv2 Authentication Filter</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
        
        <li><a href="https://github.com/geoserver/geoserver/tree/main/doc/en/user/source/community/s3-geotiff/index.rst">Edit</a></li>
        </ul>
        </div>
      <div class="section">
        <h3>Known GeoServer issues</h3>
        <ul class="this-page-menu">
          <li><a href="https://osgeo-org.atlassian.net/projects/GEOS/summary">Jira issue tracker</a></li>
        </ul>
      </div>
  </div><!-- /#sidebar -->
    </div><!-- /.wrap> -->
  </div><!-- /#main -->
<div id="footer">
    <div class="wrap">
        &copy; Copyright 2023, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
        Last updated on Jun 18, 2023.
        Created using <a href="http://www.sphinx-doc.org/">Sphinx</a>.
    </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>