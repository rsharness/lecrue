
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Monitor Query API &#8212; GeoServer 2.22.4 User Manual</title>
    <link rel="stylesheet" href="../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="../../_static/blueprint/print.css" type="text/css" media="print" /> 
    <!--[if IE]>
    <link rel="stylesheet" href="../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
    <![endif]-->
    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/default.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/geoserver.ico"/>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="GeoIP" href="geoip.html" />
    <link rel="prev" title="Audit Logging" href="audit.html" /> 
  </head><body class="extensions/monitoring/query">
<div id="header" class="selfclear">
    <div class="wrap selfclear">
        <div id="logo"><a href="http://geoserver.org">GeoServer</a></div>
        <ul id="top-nav">
            <li class="first"><a href="http://geoserver.org/about/">About</a></li>
            <li><a href="http://geoserver.org/blog">Blog</a></li>
            <li><a href="http://geoserver.org/download/">Download</a></li>
            <li><a href="https://docs.geoserver.org/">Documentation</a></li>
        </ul>

        <form id="quick-search" action="../../search.html" method="get">
            <fieldset>
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
                <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" size="20" tabindex="3" placeholder="Search User Manual&hellip;" />
                <input id="quick-search-submit" type="image" value="Search" src="../../_static/chrome/search_icon_green.png" />
            </fieldset>
        </form>
    </div><!-- /.wrap -->
</div><!-- /#header -->
    <div id="main">
      <div class="wrap selfclear">
        <div id="content-left" class="content-border"></div>
        <div id="content">
        
<ul id="breadcrumbs">
  
    <li><a href="../../index.html">GeoServer 2.22.4 User Manual</a> &raquo;</li>
        <li><a href="../index.html" accesskey="U">Extensions</a> &raquo;</li>
        <li><a href="index.html" accesskey="U">Monitoring</a> &raquo;</li>
    <li>Monitor Query API</li>
</ul>
        
<ul id="relatedlinks" class="selfclear">
  <li class="first"><a href="geoip.html" title="GeoIP" accesskey="N">Next</a></li>
  <li>
    <a href="audit.html" title="Audit Logging" accesskey="P">Previous</a>|
  </li>
</ul>
          
  <div class="section" id="monitor-query-api">
<span id="id1"></span><h1>Monitor Query API<a class="headerlink" href="#monitor-query-api" title="Permalink to this headline">¶</a></h1>
<p>The monitor extension provides a simple HTTP-based API for querying request information.
It allows retrieving individual request records or sets of request records, in either HTML or CSV format.
Records can be filtered by time range and the result set sorted by any field.
Large result sets can be paged over multiple queries.</p>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>The following examples show the syntax for common Monitoring queries.</p>
<div class="section" id="all-requests-as-html">
<h3>All requests as HTML<a class="headerlink" href="#all-requests-as-html" title="Permalink to this headline">¶</a></h3>
<p>The simplest query is to retrieve an HTML document containing information
about all requests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">geoserver</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">monitor</span><span class="o">/</span><span class="n">requests</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
</div>
<div class="section" id="all-requests-as-csv">
<h3>All requests as CSV<a class="headerlink" href="#all-requests-as-csv" title="Permalink to this headline">¶</a></h3>
<p>Request information can be returned in CSV format, for easier post-processing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">geoserver</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">monitor</span><span class="o">/</span><span class="n">requests</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
<p>Request bodies containing newlines are handled with quoted text.  If your CSV reader doesn’t handle quoted newlines, it will not work correctly.</p>
</div>
<div class="section" id="all-requests-as-pkzip">
<h3>All requests as PKZip<a class="headerlink" href="#all-requests-as-pkzip" title="Permalink to this headline">¶</a></h3>
<p>A PKZip archive containing the CSV file above, with all the request bodies and errors as separate files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">geoserver</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">monitor</span><span class="o">/</span><span class="n">requests</span><span class="o">.</span><span class="n">zip</span>
</pre></div>
</div>
</div>
<div class="section" id="all-requests-as-ms-excel">
<h3>All requests as MS Excel<a class="headerlink" href="#all-requests-as-ms-excel" title="Permalink to this headline">¶</a></h3>
<p>A Microsoft Excel spreadsheet containing the same information as the CSV file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">geoserver</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">monitor</span><span class="o">/</span><span class="n">requests</span><span class="o">.</span><span class="n">xls</span>
</pre></div>
</div>
</div>
<div class="section" id="requests-during-a-time-period">
<h3>Requests during a time period<a class="headerlink" href="#requests-during-a-time-period" title="Permalink to this headline">¶</a></h3>
<p>Requests can be filtered by date and time range:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>GET http://localhost:8080/geoserver/rest/monitor/requests.html?from=2010-06-20&amp;to=2010-07-20
GET http://localhost:8080/geoserver/rest/monitor/requests.html?from=2010-06-20T2:00:00&amp;to=2010-06-20T16:00:00
</pre></div>
</div>
</div>
<div class="section" id="request-set-paging">
<h3>Request set paging<a class="headerlink" href="#request-set-paging" title="Permalink to this headline">¶</a></h3>
<p>Large result sets can be paged over multiple queries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>GET http://localhost:8080/geoserver/rest/monitor/requests.html?count=100
GET http://localhost:8080/geoserver/rest/monitor/requests.html?count=100&amp;offset=100
GET http://localhost:8080/geoserver/rest/monitor/requests.html?count=100&amp;offset=200
GET http://localhost:8080/geoserver/rest/monitor/requests.html?count=100&amp;offset=300
</pre></div>
</div>
</div>
<div class="section" id="single-request">
<h3>Single request<a class="headerlink" href="#single-request" title="Permalink to this headline">¶</a></h3>
<p>An individual request can be retrieved by specifying its ID:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">geoserver</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">monitor</span><span class="o">/</span><span class="n">requests</span><span class="o">/</span><span class="mf">12345.</span><span class="n">html</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<p>There are two kinds of query: one for single requests, and one for sets of requests.</p>
<div class="section" id="single-request-query">
<h3>Single Request Query<a class="headerlink" href="#single-request-query" title="Permalink to this headline">¶</a></h3>
<p>A query for a single request record has the structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="n">http</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">host</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">port</span><span class="o">&gt;/</span><span class="n">geoserver</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">monitor</span><span class="o">/</span><span class="n">requests</span><span class="o">/&lt;</span><span class="nb">id</span><span class="o">&gt;.&lt;</span><span class="nb">format</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">id</span></code> is the numeric identifier of a single request,
and <code class="docutils literal notranslate"><span class="pre">format</span></code> specifies the representation of the returned result as one of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">html</span></code> - an HTML table.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">csv</span></code> - a Comma Separated Values table.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">zip</span></code> - PKZip archive containing CSV as above, plus plain text of errors and request body.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xls</span></code> - Microsoft Excel spreadsheet.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An alternative to specifying the returned representation with the
<code class="docutils literal notranslate"><span class="pre">format</span></code> extension is to use the http <code class="docutils literal notranslate"><span class="pre">Accept</span></code> header and specify
the MIME type as one of:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">text/html</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">application/csv</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">application/zip</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">application/vnd.ms-excel</span></code></p></li>
</ul>
</div></blockquote>
<p>See the <a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html">HTTP specification</a>
for more information about the <code class="docutils literal notranslate"><span class="pre">Accept</span></code> header.</p>
</div>
</div>
<div class="section" id="request-set-query">
<h3>Request Set Query<a class="headerlink" href="#request-set-query" title="Permalink to this headline">¶</a></h3>
<p>The structure of a query for a set of requests is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>GET http://&lt;host&gt;:&lt;port&gt;/geoserver/rest/monitor/requests.&lt;format&gt;[?parameter{&amp;parameter}]
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">format</span></code> is as described above,
and <code class="docutils literal notranslate"><span class="pre">parameter</span></code> is one or more of the parameters listed below.</p>
<p>The request set query accepts various parameters
that control what requests are returned and how they are sorted.
The available parameters are:</p>
</div>
<div class="section" id="count-parameter">
<h3>count Parameter<a class="headerlink" href="#count-parameter" title="Permalink to this headline">¶</a></h3>
<p>Specifies how many records should be returned.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">count=&lt;integer&gt;</span></code></p></td>
<td><p>requests.html?count=100</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="offset-parameter">
<h3>offset Parameter<a class="headerlink" href="#offset-parameter" title="Permalink to this headline">¶</a></h3>
<p>Specifies where in the result set records should be returned from.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">offset=&lt;integer&gt;</span></code></p></td>
<td><p>requests.html?count=100&amp;offset=500</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="live-parameter">
<h3>live Parameter<a class="headerlink" href="#live-parameter" title="Permalink to this headline">¶</a></h3>
<p>Specifies that only live (currently executing) requests be returned.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">live=&lt;yes|no|true|false&gt;</span></code></p></td>
<td><p>requests.html?live=yes</p></td>
</tr>
</tbody>
</table>
<p>This parameter relies on a <a class="reference internal" href="configuration.html#monitor-mode"><span class="std std-ref">Monitor Mode</span></a> being used that maintains real time
request information (either <strong>live</strong> or <strong>mixed</strong>).</p>
</div>
<div class="section" id="from-parameter">
<h3>from Parameter<a class="headerlink" href="#from-parameter" title="Permalink to this headline">¶</a></h3>
<p>Specifies an inclusive lower bound on the timestamp for the start of a request.
The timestamp can be specified to any desired precision.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">from=&lt;timestamp&gt;</span></code></p></td>
<td><p>requests.html?from=2010-07-23T16:16:44</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>requests.html?from=2010-07-23</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="to-parameter">
<h3>to Parameter<a class="headerlink" href="#to-parameter" title="Permalink to this headline">¶</a></h3>
<p>Specifies an inclusive upper bound on the timestamp for the start of a request.
The timestamp can be specified to any desired precision.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">to=&lt;timestamp&gt;</span></code></p></td>
<td><p>requests.html?to=2010-07-24T00:00:00</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>requests.html?to=2010-07-24</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="order-parameter">
<h3>order Parameter<a class="headerlink" href="#order-parameter" title="Permalink to this headline">¶</a></h3>
<p>Specifies which request attribute to sort by, and optionally specifies the sort direction.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">order=&lt;attribute&gt;[;&lt;ASC|DESC&gt;]</span></code></p></td>
<td><p>requests.html?order=path</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>requests.html?order=startTime;DESC</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>requests.html?order=totalTime;ASC</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


        <div class="selfclear pagination-nav">
            <div class="leftwise"><strong>Previous</strong>: <a href="audit.html" title="previous chapter">Audit Logging</a></div>
            <div class="rightwise"><strong>Next</strong>: <a href="geoip.html" title="next chapter">GeoIP</a></div>
        </div>
        </div><!-- /#content> -->
        <div id="content-right" class="content-border"></div>
        
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix"><a href="../../index.html">Table Of Contents</a></h3>
        <ul>
<li><a class="reference internal" href="#">Monitor Query API</a><ul>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#all-requests-as-html">All requests as HTML</a></li>
<li><a class="reference internal" href="#all-requests-as-csv">All requests as CSV</a></li>
<li><a class="reference internal" href="#all-requests-as-pkzip">All requests as PKZip</a></li>
<li><a class="reference internal" href="#all-requests-as-ms-excel">All requests as MS Excel</a></li>
<li><a class="reference internal" href="#requests-during-a-time-period">Requests during a time period</a></li>
<li><a class="reference internal" href="#request-set-paging">Request set paging</a></li>
<li><a class="reference internal" href="#single-request">Single request</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api-reference">API Reference</a><ul>
<li><a class="reference internal" href="#single-request-query">Single Request Query</a></li>
<li><a class="reference internal" href="#request-set-query">Request Set Query</a></li>
<li><a class="reference internal" href="#count-parameter">count Parameter</a></li>
<li><a class="reference internal" href="#offset-parameter">offset Parameter</a></li>
<li><a class="reference internal" href="#live-parameter">live Parameter</a></li>
<li><a class="reference internal" href="#from-parameter">from Parameter</a></li>
<li><a class="reference internal" href="#to-parameter">to Parameter</a></li>
<li><a class="reference internal" href="#order-parameter">order Parameter</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="audit.html" title="previous chapter">Audit Logging</a></li>
            <li>Next: <a href="geoip.html" title="next chapter">GeoIP</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
        
        <li><a href="https://github.com/geoserver/geoserver/tree/main/doc/en/user/source/extensions/monitoring/query.rst">Edit</a></li>
        </ul>
        </div>
      <div class="section">
        <h3>Known GeoServer issues</h3>
        <ul class="this-page-menu">
          <li><a href="https://osgeo-org.atlassian.net/projects/GEOS/summary">Jira issue tracker</a></li>
        </ul>
      </div>
  </div><!-- /#sidebar -->
    </div><!-- /.wrap> -->
  </div><!-- /#main -->
<div id="footer">
    <div class="wrap">
        &copy; Copyright 2023, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
        Last updated on Jun 18, 2023.
        Created using <a href="http://www.sphinx-doc.org/">Sphinx</a>.
    </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>