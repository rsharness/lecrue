
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Installing required NetCDF-4 Native libraries &#8212; GeoServer 2.22.4 User Manual</title>
    <link rel="stylesheet" href="../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="../../_static/blueprint/print.css" type="text/css" media="print" /> 
    <!--[if IE]>
    <link rel="stylesheet" href="../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
    <![endif]-->
    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/default.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/geoserver.ico"/>
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body class="extensions/netcdf-out/nc4">
<div id="header" class="selfclear">
    <div class="wrap selfclear">
        <div id="logo"><a href="http://geoserver.org">GeoServer</a></div>
        <ul id="top-nav">
            <li class="first"><a href="http://geoserver.org/about/">About</a></li>
            <li><a href="http://geoserver.org/blog">Blog</a></li>
            <li><a href="http://geoserver.org/download/">Download</a></li>
            <li><a href="https://docs.geoserver.org/">Documentation</a></li>
        </ul>

        <form id="quick-search" action="../../search.html" method="get">
            <fieldset>
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
                <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" size="20" tabindex="3" placeholder="Search User Manual&hellip;" />
                <input id="quick-search-submit" type="image" value="Search" src="../../_static/chrome/search_icon_green.png" />
            </fieldset>
        </form>
    </div><!-- /.wrap -->
</div><!-- /#header -->
    <div id="main">
      <div class="wrap selfclear">
        <div id="content-left" class="content-border"></div>
        <div id="content">
        
<ul id="breadcrumbs">
  
    <li><a href="../../index.html">GeoServer 2.22.4 User Manual</a> &raquo;</li>
    <li>Installing required NetCDF-4 Native libraries</li>
</ul>
        
<ul id="relatedlinks" class="selfclear">
</ul>
          
  <div class="section" id="installing-required-netcdf-4-native-libraries">
<span id="nc4"></span><h1>Installing required NetCDF-4 Native libraries<a class="headerlink" href="#installing-required-netcdf-4-native-libraries" title="Permalink to this headline">¶</a></h1>
<p>In order to write NetCDF-4 files, you must have the NetCDF-4 C library (version 4.3.1 or above) available on your system, along with all supporting libraries (HDF5, zlib, etc).
The following sections provide quick reference installation instructions.
For more detailed info, please take a look at the <a class="reference external" href="https://docs.unidata.ucar.edu/netcdf-java/current/userguide/netcdf4_c_library.html">NetCDF-4 C Library Loading</a> page.</p>
<div class="section" id="windows-install">
<h2>Windows install<a class="headerlink" href="#windows-install" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Download the latest NetCDF4 installer from the <a class="reference external" href="https://www.unidata.ucar.edu/software/netcdf/docs/winbin.html">NetCDF-C Windows Libraries</a> page.</p></li>
<li><p>Install the executable</p></li>
<li><p>Make sure to add the <em>bin</em> folder of the package you have extracted, to the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable.</p></li>
</ol>
</div>
<div class="section" id="linux-install">
<h2>Linux install<a class="headerlink" href="#linux-install" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Download the latest required dependencies (SZIP, ZLIB, HDF5) from the <a class="reference external" href="ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4/">NetCDF-4 libraries section</a>.</p>
<dl>
<dt>As an instance:</dt><dd><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4/hdf5-1.8.13.tar.gz
wget ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4/zlib-1.2.8.tar.gz
</pre></div>
</div>
</dd>
</dl>
</li>
<li><p>Download the latest NetCDF-C source code from <a class="reference external" href="https://github.com/Unidata/netcdf-c/releases/">here</a>.</p>
<dl>
<dt>As an instance:</dt><dd><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget https://github.com/Unidata/netcdf-c/archive/v4.3.3.1.tar.gz
</pre></div>
</div>
</dd>
</dl>
</li>
<li><p>Build and install the required dependencies (The following instructions assume that you will install all NetCDF4 C libs on <code class="docutils literal notranslate"><span class="pre">/work/libs/nc4libs</span></code>, as an instance).</p>
<ol class="arabic">
<li><dl>
<dt>ZLIB</dt><dd><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./configure --prefix<span class="o">=</span>/work/libs/nc4libs

make check install
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>HDF5</dt><dd><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./configure --with-zlib<span class="o">=</span>/work/libs/nc4libs --prefix<span class="o">=</span>/work/libs/nc4libs --enable-threadsafe --with-pthread<span class="o">=</span>/DIR/TO/PTHREAD

make check install
</pre></div>
</div>
</dd>
</dl>
</li>
</ol>
</li>
<li><p>Build the NetCDF C Library.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">CPPFLAGS</span><span class="o">=</span>-I/work/libs/nc4libs/include <span class="nv">LDFLAGS</span><span class="o">=</span>-L/work/libs/nc4libs/lib ./configure --prefix<span class="o">=</span>/work/libs/nc4libs

make check install
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Make sure to add the <em>lib</em> folder of the package you have extracted, to the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable.</p></li>
</ol>
</div>
<div class="section" id="geoserver-startup-checks">
<h2>GeoServer startup checks<a class="headerlink" href="#geoserver-startup-checks" title="Permalink to this headline">¶</a></h2>
<p>If everything has been properly configured, you may notice a similar log message during GeoServer startup:</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">NetCDF-4</span> <span class="pre">C</span> <span class="pre">library</span> <span class="pre">loaded</span> <span class="pre">(jna_path='null',</span> <span class="pre">libname='netcdf').</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Netcdf</span> <span class="pre">nc_inq_libvers='4.3.1</span> <span class="pre">of</span> <span class="pre">Jan</span> <span class="pre">16</span> <span class="pre">2014</span> <span class="pre">15:04:00</span> <span class="pre">$'</span> <span class="pre">isProtected=true</span></code></div>
<div class="line"><br /></div>
</div>
<p>In case the native libraries haven’t been properly configured you will see a message like this, instead:</p>
<p><code class="docutils literal notranslate"><span class="pre">NetCDF-4</span> <span class="pre">C</span> <span class="pre">library</span> <span class="pre">not</span> <span class="pre">present</span> <span class="pre">(jna_path='null',</span> <span class="pre">libname='netcdf').</span></code></p>
</div>
</div>
<div class="section" id="requesting-a-netcdf4-classic-output-file-as-wcs2-0-output">
<h1>Requesting a NetCDF4-Classic output file as WCS2.0 output<a class="headerlink" href="#requesting-a-netcdf4-classic-output-file-as-wcs2-0-output" title="Permalink to this headline">¶</a></h1>
<p>Specifying application/x-netcdf4 as Format, will return a NetCDF4-Classic output files, provided that the underlying libraries are available.</p>
</div>


        </div><!-- /#content> -->
        <div id="content-right" class="content-border"></div>
        
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix"><a href="../../index.html">Table Of Contents</a></h3>
        <ul>
<li><a class="reference internal" href="#">Installing required NetCDF-4 Native libraries</a><ul>
<li><a class="reference internal" href="#windows-install">Windows install</a></li>
<li><a class="reference internal" href="#linux-install">Linux install</a></li>
<li><a class="reference internal" href="#geoserver-startup-checks">GeoServer startup checks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#requesting-a-netcdf4-classic-output-file-as-wcs2-0-output">Requesting a NetCDF4-Classic output file as WCS2.0 output</a></li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
        
        <li><a href="https://github.com/geoserver/geoserver/tree/main/doc/en/user/source/extensions/netcdf-out/nc4.rst">Edit</a></li>
        </ul>
        </div>
      <div class="section">
        <h3>Known GeoServer issues</h3>
        <ul class="this-page-menu">
          <li><a href="https://osgeo-org.atlassian.net/projects/GEOS/summary">Jira issue tracker</a></li>
        </ul>
      </div>
  </div><!-- /#sidebar -->
    </div><!-- /.wrap> -->
  </div><!-- /#main -->
<div id="footer">
    <div class="wrap">
        &copy; Copyright 2023, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
        Last updated on Jun 18, 2023.
        Created using <a href="http://www.sphinx-doc.org/">Sphinx</a>.
    </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>