
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced log configuration &#8212; GeoServer 2.22.4 User Manual</title>
    <link rel="stylesheet" href="../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="../_static/blueprint/print.css" type="text/css" media="print" /> 
    <!--[if IE]>
    <link rel="stylesheet" href="../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
    <![endif]-->
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/default.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/geoserver.ico"/>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Coordinate Reference System Handling" href="crshandling/index.html" />
    <link rel="prev" title="REST Configuration" href="REST.html" /> 
  </head><body class="configuration/logging">
<div id="header" class="selfclear">
    <div class="wrap selfclear">
        <div id="logo"><a href="http://geoserver.org">GeoServer</a></div>
        <ul id="top-nav">
            <li class="first"><a href="http://geoserver.org/about/">About</a></li>
            <li><a href="http://geoserver.org/blog">Blog</a></li>
            <li><a href="http://geoserver.org/download/">Download</a></li>
            <li><a href="https://docs.geoserver.org/">Documentation</a></li>
        </ul>

        <form id="quick-search" action="../search.html" method="get">
            <fieldset>
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
                <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" size="20" tabindex="3" placeholder="Search User Manual&hellip;" />
                <input id="quick-search-submit" type="image" value="Search" src="../_static/chrome/search_icon_green.png" />
            </fieldset>
        </form>
    </div><!-- /.wrap -->
</div><!-- /#header -->
    <div id="main">
      <div class="wrap selfclear">
        <div id="content-left" class="content-border"></div>
        <div id="content">
        
<ul id="breadcrumbs">
  
    <li><a href="../index.html">GeoServer 2.22.4 User Manual</a> &raquo;</li>
        <li><a href="index.html" accesskey="U">Server configuration</a> &raquo;</li>
    <li>Advanced log configuration</li>
</ul>
        
<ul id="relatedlinks" class="selfclear">
  <li class="first"><a href="crshandling/index.html" title="Coordinate Reference System Handling" accesskey="N">Next</a></li>
  <li>
    <a href="REST.html" title="REST Configuration" accesskey="P">Previous</a>|
  </li>
</ul>
          
  <div class="section" id="advanced-log-configuration">
<span id="logging"></span><h1>Advanced log configuration<a class="headerlink" href="#advanced-log-configuration" title="Permalink to this headline">¶</a></h1>
<p>GeoServer uses the Log4J framework for logging, which is configured by selecting a logging profile (in the <a class="reference internal" href="globalsettings.html#config-globalsettings-log-location"><span class="std std-ref">global settings</span></a>).</p>
<p>The GeoServer logging profiles assign logging levels to specific server operations:</p>
<ul class="simple">
<li><p>GeoServer loggers record server function and the activity of individual services.</p></li>
<li><p>GeoWebCache loggers record the activity of the tile protocol library used by GeoServer.</p></li>
<li><p>GeoTools loggers record the activity of the data access and rendering library used by GeoServer.</p></li>
<li><p>The appender <code class="docutils literal notranslate"><span class="pre">stdout</span></code> is setup as a Console appender sending information to standard output, based on <span class="guilabel">Log to Stdout</span> <a class="reference internal" href="globalsettings.html#config-globalsettings-log-stdout"><span class="std std-ref">global settings</span></a>.</p></li>
<li><p>The appender <code class="docutils literal notranslate"><span class="pre">geoserverlogfile</span></code> is setup as a FileAppender or RollingFile appender sending information to the <span class="guilabel">Log location</span> <a class="reference internal" href="globalsettings.html#config-globalsettings-log-location"><span class="std std-ref">global settings</span></a>.</p></li>
<li><p>Logging levels range from:</p>
<ul>
<li><p>Failure (<code class="docutils literal notranslate"><span class="pre">FATAL</span></code>, <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>, <code class="docutils literal notranslate"><span class="pre">WARN</span></code>) levels</p></li>
<li><p>Operational (<code class="docutils literal notranslate"><span class="pre">INFO</span></code>, <code class="docutils literal notranslate"><span class="pre">CONFIG</span></code>) levels</p></li>
<li><p>Verbose (<code class="docutils literal notranslate"><span class="pre">DEBUG</span></code>, <code class="docutils literal notranslate"><span class="pre">TRACE</span></code>, <code class="docutils literal notranslate"><span class="pre">FINEST</span></code>) levels</p></li>
</ul>
</li>
</ul>
<p>In addition to the built-in profiles you may setup a custom logging profile, or override the logging configuration completely (even to use another logging library altogether).</p>
<div class="section" id="built-in-logging-profiles">
<h2>Built-in logging profiles<a class="headerlink" href="#built-in-logging-profiles" title="Permalink to this headline">¶</a></h2>
<p>GeoServer includes several built-in logging profiles:</p>
<ul class="simple">
<li><p><a class="reference download internal" download="" href="../_downloads/e5abd6ce990e18e15c7d0ff3a327a28d/DEFAULT_LOGGING.xml"><code class="xref download docutils literal notranslate"><span class="pre">DEFAULT_LOGGING</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/9c8566690d94db5d0e2e30c0d2fda014/GEOSERVER_DEVELOPER_LOGGING.xml"><code class="xref download docutils literal notranslate"><span class="pre">GEOSERVER_DEVELOPER_LOGGING</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/90b01ba49f64048d9b8b555feab353dc/GEOTOOLS_DEVELOPER_LOGGING.xml"><code class="xref download docutils literal notranslate"><span class="pre">GEOTOOLS_DEVELOPER_LOGGING</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/396991813b7347ce2c8de9e156c43bb5/PRODUCTION_LOGGING.xml"><code class="xref download docutils literal notranslate"><span class="pre">PRODUCTION_LOGGING</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/b2b31b0f41fd098b3cbb9753495d8772/QUIET_LOGGING.xml"><code class="xref download docutils literal notranslate"><span class="pre">QUIET_LOGGING</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/8dadbf0f72d0eefbac628392cc913dc3/VERBOSE_LOGGING.xml"><code class="xref download docutils literal notranslate"><span class="pre">VERBOSE_LOGGING</span></code></a></p></li>
</ul>
<p>The built-in logging profiles are installed into your data directory the first time the application is run. If you have customized (see the next section) these files and wish to restore the original contents:</p>
<ul class="simple">
<li><p>Use the startup parameter <code class="docutils literal notranslate"><span class="pre">-DUPDATE_BUILT_IN_LOGGING_PROFILES=true</span></code>, the built-in logging profiles will be checked and updated if required; or</p></li>
<li><p>Delete the file and restart GeoServer, the missing file will be restored; or</p></li>
<li><p>Copy the contents from the download links above</p></li>
</ul>
<p>For a description of these logging profiles see <a class="reference internal" href="globalsettings.html#config-globalsettings-log-profile"><span class="std std-ref">Logging Profile</span></a>. Additional built-in logging profiles are supplied by installed extensions (example <a class="reference download internal" download="" href="../_downloads/760cfd758cd8bb9f942177b0e5aa97aa/IMPORTER_LOGGING.xml"><code class="xref download docutils literal notranslate"><span class="pre">IMPORTER_LOGGING</span></code></a> profile is built into the importer extension).</p>
</div>
<div class="section" id="custom-logging-profiles">
<h2>Custom logging profiles<a class="headerlink" href="#custom-logging-profiles" title="Permalink to this headline">¶</a></h2>
<p>Anyone can write a new logging profile by adding a Log4J configuration file to the list of files already available in the <code class="docutils literal notranslate"><span class="pre">$GEOSERVER_DATA_DIR/logs</span></code> folder.</p>
<p>Profiles in this folder that match <code class="file docutils literal notranslate"><span class="pre">*_LOGGING.*</span></code> will be listed on the global settings page as available for use. The name of the file, excluding the extension, will be presented as the profile name.</p>
<p>Here is an example, taken from the <a class="reference download internal" download="" href="../_downloads/e5abd6ce990e18e15c7d0ff3a327a28d/DEFAULT_LOGGING.xml"><code class="xref download docutils literal notranslate"><span class="pre">DEFAULT_LOGGING.xml</span></code></a>  configuration, which enables additional GeoServer log messages to be included in the logs:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="c">&lt;!-- This log4j configuration file needs to stay here, and is used as the default logging setup --&gt;</span>
<span class="c">&lt;!-- during data_dir upgrades and in case the chosen logging config isn&#39;t available.            --&gt;</span>
<span class="nt">&lt;Configuration</span> <span class="na">name=</span><span class="s">&quot;DEFAULT_LOGGING&quot;</span> <span class="na">status=</span><span class="s">&quot;fatal&quot;</span> <span class="na">dest=</span><span class="s">&quot;out&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Appenders&gt;</span>
        <span class="nt">&lt;Console</span> <span class="na">name=</span><span class="s">&quot;stdout&quot;</span> <span class="na">target=</span><span class="s">&quot;SYSTEM_OUT&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;PatternLayout</span> <span class="na">pattern=</span><span class="s">&quot;%date{dd MMM HH:mm:ss} %-6level [%logger{2}] - %msg%n%throwable{filters(org.junit,org.apache.maven,sun.reflect,java.lang.reflect)}&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/Console&gt;</span>
        <span class="nt">&lt;RollingFile</span> <span class="na">name=</span><span class="s">&quot;geoserverlogfile&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;filename&gt;</span>logs/geoserver.log<span class="nt">&lt;/filename&gt;</span>
            <span class="nt">&lt;filePattern&gt;</span>logs/geoserver-%i.log<span class="nt">&lt;/filePattern&gt;</span>
            <span class="nt">&lt;PatternLayout</span> <span class="na">pattern=</span><span class="s">&quot;%date{dd MMM HH:mm:ss} %-6level [%logger{2}] - %msg%n%throwable{filters(org.junit,org.apache.maven,sun.reflect,java.lang.reflect)}&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;Policies&gt;</span>
                <span class="nt">&lt;SizeBasedTriggeringPolicy</span> <span class="na">size=</span><span class="s">&quot;20 MB&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/Policies&gt;</span>
            <span class="nt">&lt;DefaultRolloverStrategy</span> <span class="na">max=</span><span class="s">&quot;3&quot;</span> <span class="na">fileIndex=</span><span class="s">&quot;min&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/RollingFile&gt;</span>
    <span class="nt">&lt;/Appenders&gt;</span>
    <span class="nt">&lt;Loggers&gt;</span>
        <span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">&quot;org.geotools&quot;</span> <span class="na">level=</span><span class="s">&quot;warn&quot;</span> <span class="na">additivity=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;stdout&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;geoserverlogfile&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/Logger&gt;</span>
        <span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">&quot;org.geotools.factory&quot;</span> <span class="na">level=</span><span class="s">&quot;warn&quot;</span> <span class="na">additivity=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;stdout&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;geoserverlogfile&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/Logger&gt;</span>
        <span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">&quot;org.geoserver&quot;</span> <span class="na">level=</span><span class="s">&quot;CONFIG&quot;</span> <span class="na">additivity=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;stdout&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;geoserverlogfile&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/Logger&gt;</span>
        <span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">&quot;org.vfny.geoserver&quot;</span> <span class="na">level=</span><span class="s">&quot;CONFIG&quot;</span> <span class="na">additivity=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;stdout&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;geoserverlogfile&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/Logger&gt;</span>

        <span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">&quot;org.springframework&quot;</span> <span class="na">level=</span><span class="s">&quot;warn&quot;</span> <span class="na">additivity=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;stdout&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;geoserverlogfile&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/Logger&gt;</span>

        <span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">&quot;org.geowebcache&quot;</span> <span class="na">level=</span><span class="s">&quot;CONFIG&quot;</span> <span class="na">additivity=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;stdout&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;geoserverlogfile&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/Logger&gt;</span>
        <span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">&quot;org.geowebcache.seed&quot;</span> <span class="na">level=</span><span class="s">&quot;warn&quot;</span> <span class="na">additivity=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;stdout&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;geoserverlogfile&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/Logger&gt;</span>
        <span class="nt">&lt;Root</span> <span class="na">level=</span><span class="s">&quot;warn&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;stdout&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;geoserverlogfile&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/Root&gt;</span>
    <span class="nt">&lt;/Loggers&gt;</span>
<span class="nt">&lt;/Configuration&gt;</span>
</pre></div>
</div>
<p>Any custom configuration can be setup to enable specific packages to emit logs at the desired logging level.</p>
<p>There are however a few rules to follow:</p>
<ul>
<li><p>Custom levels are available for <code class="docutils literal notranslate"><span class="pre">CONFIG</span></code> and <code class="docutils literal notranslate"><span class="pre">FINEST</span></code> levels.</p></li>
<li><p>Appenders are used to output logging information, with GeoServer providing external configuration for appenders named <code class="docutils literal notranslate"><span class="pre">geoserverlogfile</span></code> and <code class="docutils literal notranslate"><span class="pre">stdout</span></code>.</p>
<ul>
<li><p>Always include a <code class="docutils literal notranslate"><span class="pre">geoserverlogfile</span></code> <code class="docutils literal notranslate"><span class="pre">FileAppender</span></code> or <code class="docutils literal notranslate"><span class="pre">RollingFile</span></code> appender that GeoServer will configure to work against the location configured in the <a class="reference internal" href="globalsettings.html#config-globalsettings-log-location"><span class="std std-ref">global settings</span></a>.</p>
<p>Care is taken to preserve your file extension when updating <code class="docutils literal notranslate"><span class="pre">&lt;filename&gt;</span></code> location, so if you wish to log to <code class="file docutils literal notranslate"><span class="pre">access_logs.txt</span></code> you may do so, and the <code class="file docutils literal notranslate"><span class="pre">txt</span></code> extension will be preserved.</p>
</li>
<li><p>When setting <code class="docutils literal notranslate"><span class="pre">geoserverlogfile</span></code> appender as <code class="docutils literal notranslate"><span class="pre">RollingFile</span></code> appender, care is taken to preserve your <code class="docutils literal notranslate"><span class="pre">&lt;filePattern&gt;</span></code> extensions, which must align with the roll over strategies configured.</p>
<p>As an example <code class="docutils literal notranslate"><span class="pre">-%i</span></code> is used with DefaultRolloverStrategy to produce a maximum of <code class="docutils literal notranslate"><span class="pre">3</span></code> backup files.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;RollingFile</span> <span class="na">name=</span><span class="s">&quot;geoserverlogfile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;filename&gt;</span>logs/geoserver.log<span class="nt">&lt;/filename&gt;</span>
    <span class="nt">&lt;filePattern&gt;</span>logs/geoserver-%i.log<span class="nt">&lt;/filePattern&gt;</span>
    <span class="nt">&lt;PatternLayout</span> <span class="na">pattern=</span><span class="s">&quot;%date{dd MMM HH:mm:ss} %-6level [%logger{2}] - %msg%n%throwable{filters(org.junit,org.apache.maven,sun.reflect,java.lang.reflect)}&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;Policies&gt;</span>
        <span class="nt">&lt;SizeBasedTriggeringPolicy</span> <span class="na">size=</span><span class="s">&quot;20 MB&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Policies&gt;</span>
    <span class="nt">&lt;DefaultRolloverStrategy</span> <span class="na">max=</span><span class="s">&quot;3&quot;</span> <span class="na">fileIndex=</span><span class="s">&quot;min&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/RollingFile&gt;</span>
</pre></div>
</div>
</li>
<li><p>a <code class="docutils literal notranslate"><span class="pre">Console</span></code> appender writing to the standard output should be called <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and again GeoServer will enable/disable it according to the configuration set in the <a class="reference internal" href="globalsettings.html#config-globalsettings-log-stdout"><span class="std std-ref">global settings</span></a></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Console</span> <span class="na">name=</span><span class="s">&quot;stdout&quot;</span> <span class="na">target=</span><span class="s">&quot;SYSTEM_OUT&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;PatternLayout</span> <span class="na">pattern=</span><span class="s">&quot;%date{dd MMM HH:mm:ss} %-6level [%logger{2}] - %msg%n%throwable{filters(org.junit,org.apache.maven,sun.reflect,java.lang.reflect)}&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Console&gt;</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Loggers are used to collect messages from geoserver components, and individual libraries used.</p>
<ul>
<li><p>GeoServer Logger names match up with the package names in the project javadocs overview (available for download).</p>
<p>As an example package <code class="docutils literal notranslate"><span class="pre">org.geoserver.wms</span></code> is listed, allowing level of WMS service logging to be controlled:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">&quot;org.geoserver.wms&quot;</span> <span class="na">level=</span><span class="s">&quot;debug&quot;</span> <span class="na">additivity=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;stdout&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;geoserverlogfile&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Logger&gt;</span>
</pre></div>
</div>
</li>
<li><p>GeoTools Logger names match up with the package names in the <a class="reference external" href="https://docs.geotools.org/latest/javadocs/overview-summary.html">project javadocs overview</a>.</p>
<p>As an example package <code class="docutils literal notranslate"><span class="pre">org.geotools.data.shapefile</span></code> is listed, allowing level of shapefile logging to be controlled:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">&quot;org.geotools.data.shapefile&quot;</span> <span class="na">level=</span><span class="s">&quot;debug&quot;</span> <span class="na">additivity=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;stdout&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;geoserverlogfile&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Logger&gt;</span>
</pre></div>
</div>
</li>
<li><p>Assign a level to each logger indicating the level of detail you wish to record:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 92%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Level</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OFF</p></td>
<td><p>Turn off all logging</p></td>
</tr>
<tr class="row-odd"><td><p>FATAL</p></td>
<td><p>A serious problem has occurred, application may be crashing or in need of restart</p></td>
</tr>
<tr class="row-even"><td><p>ERROR</p></td>
<td><p>Problem has occurred, application unable to perform requested operation</p></td>
</tr>
<tr class="row-odd"><td><p>WARN</p></td>
<td><p>Potential problem, application will try and continue</p></td>
</tr>
<tr class="row-even"><td><p>INFO</p></td>
<td><p>Normal function indicating what application is doing.</p></td>
</tr>
<tr class="row-odd"><td><p>CONFIG</p></td>
<td><p>Normal application function during application startup and configuration</p></td>
</tr>
<tr class="row-even"><td><p>DEBUG</p></td>
<td><p>Internal messages intended for debugging</p></td>
</tr>
<tr class="row-odd"><td><p>TRACE</p></td>
<td><p>Metod by method tracing of execution</p></td>
</tr>
<tr class="row-even"><td><p>FINEST</p></td>
<td><p>Really detailed troubleshooting of an algorithm</p></td>
</tr>
<tr class="row-odd"><td><p>ALL</p></td>
<td><p>Turn on all logging</p></td>
</tr>
</tbody>
</table>
<p>The more verbose logging levels potentially include a strack-trace showing where the message occurred.</p>
</li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">additivity=&quot;false&quot;</span></code> to prevent a message collected from one logger from being passed to the next.</p>
<p>If you end up with double log messages chances check for this common misconfiguration.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Root</span></code> logger is last in the list and should collect everything.</p></li>
</ul>
</li>
</ul>
<div class="section" id="example-of-console-only-logging">
<h3>Example of console only logging<a class="headerlink" href="#example-of-console-only-logging" title="Permalink to this headline">¶</a></h3>
<p>Copy built-in logging profile and customize:</p>
<ol class="arabic">
<li><p>Copy an example such as <a class="reference download internal" download="" href="../_downloads/b2b31b0f41fd098b3cbb9753495d8772/QUIET_LOGGING.xml"><code class="xref download docutils literal notranslate"><span class="pre">QUIET_LOGGING.xml</span></code></a> to <code class="file docutils literal notranslate"><span class="pre">CONSOLE_LOGGING.xml</span></code>:</p></li>
<li><p>Update the initial part of <code class="file docutils literal notranslate"><span class="pre">CONSOLE_LOGGING.xml</span></code> with the new name:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;Configuration</span> <span class="na">name=</span><span class="s">&quot;CONSOLE_LOGGING&quot;</span> <span class="na">status=</span><span class="s">&quot;fatal&quot;</span> <span class="na">dest=</span><span class="s">&quot;out&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
</li>
<li><p>Double check the Console appender configuration:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Appenders&gt;</span>
    <span class="nt">&lt;Console</span> <span class="na">name=</span><span class="s">&quot;stdout&quot;</span> <span class="na">target=</span><span class="s">&quot;SYSTEM_OUT&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;PatternLayout</span> <span class="na">pattern=</span><span class="s">&quot;%date{dd mmm HH:mm:ss} %-6level [%logger{2}] - %msg%n%&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/Console&gt;</span>
<span class="nt">&lt;/Appenders&gt;</span>
</pre></div>
</div>
</li>
</ol>
<ol class="arabic" start="3">
<li><p>Add appenders for geoserver (and any others you wish to track):</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">&quot;org.geoserver&quot;</span> <span class="na">level=</span><span class="s">&quot;ERROR&quot;</span> <span class="na">additivity=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;stdout&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Logger&gt;</span>
<span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">&quot;org.vfny.geoserver&quot;</span> <span class="na">level=</span><span class="s">&quot;ERROR&quot;</span> <span class="na">additivity=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;stdout&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Logger&gt;</span>
</pre></div>
</div>
</li>
<li><p>Double check the root logger:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Root</span> <span class="na">level=</span><span class="s">&quot;FATAL&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">&quot;stdout&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Root&gt;</span>
</pre></div>
</div>
</li>
<li><p>This result provides minimal feedback to the console, only reporting when GeoServer encounters an error.</p></li>
</ol>
</div>
</div>
<div class="section" id="overriding-the-log-location-setup-in-the-geoserver-configuration">
<h2>Overriding the log location setup in the GeoServer configuration<a class="headerlink" href="#overriding-the-log-location-setup-in-the-geoserver-configuration" title="Permalink to this headline">¶</a></h2>
<p>When setting up a cluster of GeoServer machines it is common to share a single data directory among all the cluster nodes.</p>
<p>There is however a gotcha, all nodes would end up writing the logs in the same file, which would cause various kinds of troubles depending on the operating system file locking rules (a single server might be able to write, or all together in an uncontrolled manner resulting in an unreadable log file).</p>
<p>A common choice could be to use the machine name as a distinction, setting values such as  <code class="docutils literal notranslate"><span class="pre">logs/geoserver_node1.log</span></code>, <code class="docutils literal notranslate"><span class="pre">logs/geoserver_node2.log</span></code> and so on: in this case all the log files would still be contained in the data directory and properly rotated, but each server would have its own separate log file to write on.</p>
<p>In this case it is convenient to set a separate log location for each GeoServer node:</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">GEOSERVER_LOG_LOCATION</span></code> parameter can be set as system property, environment variables, or servlet context parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GEOSERVER_LOG_LOCATION</span><span class="o">=&lt;</span><span class="n">the</span> <span class="n">location</span> <span class="n">of</span> <span class="n">the</span> <span class="n">file</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This setting overrides global setting, and is applied to <code class="docutils literal notranslate"><span class="pre">geoserverlogfile</span></code> appender as a template for filename and filePattern.</p>
</li>
<li><p>This same effect may be obtained using Log4J <a class="reference external" href="https://logging.apache.org/log4j/2.x/manual/configuration.html#PropertySubstitution">property substitution</a>, where a wide range of <a class="reference external" href="https://logging.apache.org/log4j/2.x/manual/lookups.html">property lookups</a> are available.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;RollingFile</span> <span class="na">name=</span><span class="s">&quot;geoserverlogfile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;filename&gt;</span>logs/geoserver-${hostName}.log<span class="nt">&lt;/filename&gt;</span>
    <span class="nt">&lt;filePattern&gt;</span>logs/geoserver-${hostName}-%d{yyyy-MM-dd-HH}-%i.zip<span class="nt">&lt;/filePattern&gt;</span>
    <span class="nt">&lt;PatternLayout</span> <span class="na">pattern=</span><span class="s">&quot;%date{dd mmm HH:mm:ss} %-6level [%logger{2}] - %msg%n&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;Policies&gt;</span>
      <span class="nt">&lt;OnStartupTriggeringPolicy</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;SizeBasedTriggeringPolicy</span> <span class="na">size=</span><span class="s">&quot;20 MB&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;TimeBasedTriggeringPolicy</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Policies&gt;</span>
    <span class="nt">&lt;DefaultRolloverStrategy</span> <span class="na">max=</span><span class="s">&quot;9&quot;</span> <span class="na">fileIndex=</span><span class="s">&quot;min&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/RollingFile&gt;</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">${hostName}</span></code> is the current system host name or ip address.</p>
</li>
</ul>
</div>
<div class="section" id="forcing-geoserver-to-relinquish-log4j-control">
<h2>Forcing GeoServer to relinquish Log4J control<a class="headerlink" href="#forcing-geoserver-to-relinquish-log4j-control" title="Permalink to this headline">¶</a></h2>
<p>GeoServer internally overrides the Log4J configuration by using the current logging configuration as a template and applying the log location and standard output settings configured by the administrator.</p>
<p>If you wish GeoServer not to override the normal Log4J behavior you can set the following parameter among the JVM system variables, environment variables, or servlet context parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RELINQUISH_LOG4J_CONTROL</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
<p>This can be combined with <code class="docutils literal notranslate"><span class="pre">log4j2.configurationFile</span></code> system property to <a class="reference external" href="https://logging.apache.org/log4j/2.x/manual/configuration.html#AutomaticConfiguration">configure Log4J externally</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">DRELINQUISH_LOG4J_CONTROL</span><span class="o">=</span><span class="n">true</span> <span class="o">-</span><span class="n">Dlog4j2</span><span class="o">.</span><span class="n">configurationFile</span><span class="o">=</span><span class="n">logging_configuration</span><span class="o">.</span><span class="n">xml</span>
</pre></div>
</div>
</div>
<div class="section" id="forcing-geoserver-to-use-an-alternate-logging-redirection">
<h2>Forcing GeoServer to use an alternate logging redirection<a class="headerlink" href="#forcing-geoserver-to-use-an-alternate-logging-redirection" title="Permalink to this headline">¶</a></h2>
<p>GeoServer uses the GeoTools logging framework, which in turn is based on Java Logging, but allowing to redirect all message to an alternate framework of users choice.</p>
<p>By default GeoServer setups a Log4J redirection, but it is possible to configure GeoServer to use plain Java Logging, or Commons Logging instead (support for other loggers is also possible by using some extra programming).</p>
<p>If you wish to force GeoServer to use a different logging mechanism set the following parameters among the JVM system variables, environment variables, or servlet context parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GT2_LOGGING_REDIRECTION</span><span class="o">=</span><span class="p">[</span><span class="n">CommonsLogging</span><span class="p">,</span><span class="n">JavaLogging</span><span class="p">,</span><span class="n">Log4J</span><span class="p">,</span><span class="n">Log4J2</span><span class="p">,</span><span class="n">LogBack</span><span class="p">]</span>
<span class="n">RELINQUISH_LOG4J_CONTROL</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
<p>As noted in the example you’ll also have to demand that GeoServer does not exert control over the Log4J configuration.</p>
<div class="section" id="force-java-logging-example">
<h3>Force java logging example<a class="headerlink" href="#force-java-logging-example" title="Permalink to this headline">¶</a></h3>
<p>As an example to configure java logging:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">DRELINQUISH_LOG4J_CONTROL</span><span class="o">=</span><span class="n">true</span> <span class="o">-</span><span class="n">DGT2_LOGGING_REDIRECTION</span><span class="o">=</span><span class="n">JavaLogging</span> <span class="o">-</span><span class="n">Djava</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">logging</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">file</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">properties</span>
</pre></div>
</div>
<p>With java util logging configuration provided by <code class="file docutils literal notranslate"><span class="pre">logging.properties</span></code>:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">handlers</span><span class="o">=</span><span class="s">java.util.logging.ConsoleHandler</span>

<span class="na">java.util.logging.ConsoleHandler.level</span> <span class="o">=</span> <span class="s">ALL</span>
<span class="na">java.util.logging.ConsoleHandler.formatter</span> <span class="o">=</span> <span class="s">org.geotools.util.logging.MonolineFormatter</span>
<span class="na">org.geotools.util.logging.MonolineFormatter.source</span> <span class="o">=</span> <span class="s">class:short</span>

<span class="na">.level</span><span class="o">=</span> <span class="s">ALL</span>
<span class="na">org.geoserver.level</span> <span class="o">=</span> <span class="s">CONFIG</span>
<span class="na">org.vfny.geoserver.level</span> <span class="o">=</span> <span class="s">WARN</span>

<span class="na">org.geotools.level</span> <span class="o">=</span> <span class="s">WARN</span>
<span class="na">org.geotools.factory.level</span> <span class="o">=</span> <span class="s">WARN</span>
</pre></div>
</div>
</div>
</div>
</div>


        <div class="selfclear pagination-nav">
            <div class="leftwise"><strong>Previous</strong>: <a href="REST.html" title="previous chapter">REST Configuration</a></div>
            <div class="rightwise"><strong>Next</strong>: <a href="crshandling/index.html" title="next chapter">Coordinate Reference System Handling</a></div>
        </div>
        </div><!-- /#content> -->
        <div id="content-right" class="content-border"></div>
        
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix"><a href="../index.html">Table Of Contents</a></h3>
        <ul>
<li><a class="reference internal" href="#">Advanced log configuration</a><ul>
<li><a class="reference internal" href="#built-in-logging-profiles">Built-in logging profiles</a></li>
<li><a class="reference internal" href="#custom-logging-profiles">Custom logging profiles</a><ul>
<li><a class="reference internal" href="#example-of-console-only-logging">Example of console only logging</a></li>
</ul>
</li>
<li><a class="reference internal" href="#overriding-the-log-location-setup-in-the-geoserver-configuration">Overriding the log location setup in the GeoServer configuration</a></li>
<li><a class="reference internal" href="#forcing-geoserver-to-relinquish-log4j-control">Forcing GeoServer to relinquish Log4J control</a></li>
<li><a class="reference internal" href="#forcing-geoserver-to-use-an-alternate-logging-redirection">Forcing GeoServer to use an alternate logging redirection</a><ul>
<li><a class="reference internal" href="#force-java-logging-example">Force java logging example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="REST.html" title="previous chapter">REST Configuration</a></li>
            <li>Next: <a href="crshandling/index.html" title="next chapter">Coordinate Reference System Handling</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
        
        <li><a href="https://github.com/geoserver/geoserver/tree/main/doc/en/user/source/configuration/logging.rst">Edit</a></li>
        </ul>
        </div>
      <div class="section">
        <h3>Known GeoServer issues</h3>
        <ul class="this-page-menu">
          <li><a href="https://osgeo-org.atlassian.net/projects/GEOS/summary">Jira issue tracker</a></li>
        </ul>
      </div>
  </div><!-- /#sidebar -->
    </div><!-- /.wrap> -->
  </div><!-- /#main -->
<div id="footer">
    <div class="wrap">
        &copy; Copyright 2023, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
        Last updated on Jun 18, 2023.
        Created using <a href="http://www.sphinx-doc.org/">Sphinx</a>.
    </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>