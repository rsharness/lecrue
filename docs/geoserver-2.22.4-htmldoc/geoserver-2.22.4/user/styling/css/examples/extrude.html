
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Example of 2.5D extrusion &#8212; GeoServer 2.22.4 User Manual</title>
    <link rel="stylesheet" href="../../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="../../../_static/blueprint/print.css" type="text/css" media="print" /> 
    <!--[if IE]>
    <link rel="stylesheet" href="../../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
    <![endif]-->
    
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/default.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../../_static/geoserver.ico"/>
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="KML" href="kml.html" />
    <link rel="prev" title="Using transformation functions" href="transformation.html" /> 
  </head><body class="styling/css/examples/extrude">
<div id="header" class="selfclear">
    <div class="wrap selfclear">
        <div id="logo"><a href="http://geoserver.org">GeoServer</a></div>
        <ul id="top-nav">
            <li class="first"><a href="http://geoserver.org/about/">About</a></li>
            <li><a href="http://geoserver.org/blog">Blog</a></li>
            <li><a href="http://geoserver.org/download/">Download</a></li>
            <li><a href="https://docs.geoserver.org/">Documentation</a></li>
        </ul>

        <form id="quick-search" action="../../../search.html" method="get">
            <fieldset>
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
                <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" size="20" tabindex="3" placeholder="Search User Manual&hellip;" />
                <input id="quick-search-submit" type="image" value="Search" src="../../../_static/chrome/search_icon_green.png" />
            </fieldset>
        </form>
    </div><!-- /.wrap -->
</div><!-- /#header -->
    <div id="main">
      <div class="wrap selfclear">
        <div id="content-left" class="content-border"></div>
        <div id="content">
        
<ul id="breadcrumbs">
  
    <li><a href="../../../index.html">GeoServer 2.22.4 User Manual</a> &raquo;</li>
        <li><a href="../../index.html" accesskey="U">Styling</a> &raquo;</li>
        <li><a href="../index.html" accesskey="U">CSS Styling</a> &raquo;</li>
        <li><a href="index.html" accesskey="U">Styling examples</a> &raquo;</li>
    <li>Example of 2.5D extrusion</li>
</ul>
        
<ul id="relatedlinks" class="selfclear">
  <li class="first"><a href="kml.html" title="KML" accesskey="N">Next</a></li>
  <li>
    <a href="transformation.html" title="Using transformation functions" accesskey="P">Previous</a>|
  </li>
</ul>
          
  <div class="section" id="example-of-2-5d-extrusion">
<span id="css-example-extrude"></span><h1>Example of 2.5D extrusion<a class="headerlink" href="#example-of-2-5d-extrusion" title="Permalink to this headline">¶</a></h1>
<div class="section" id="extruding-a-geometry">
<h2>Extruding a geometry<a class="headerlink" href="#extruding-a-geometry" title="Permalink to this headline">¶</a></h2>
<p>In this example, a 2.5D style is applied to the US States Population default layer. To achieve the 2.5D look two styling components need to work together, named <code class="docutils literal notranslate"><span class="pre">isometric</span></code> for the extrusion effect, and <code class="docutils literal notranslate"><span class="pre">offset</span></code> to add a rooftop or top surface. In order to draw states with a larger population on top, a <code class="docutils literal notranslate"><span class="pre">sort-by</span></code> using the <code class="docutils literal notranslate"><span class="pre">PERSONS</span></code> field was added. Also note that the same z-order was given to maintain the draw order of each state.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">flat</span> <span class="pre">mode</span></code> directive was used to ensure that cascading is not applied. This enables the style to treat each CSS rule the same as an SLD rule which means rules can overlay on-top of each other with later rules being drawn first.</p>
<p>The extrusion part of the CSS produces the darker grey areas. The isometric function (see <a class="reference internal" href="../../../filter/function_reference.html"><span class="doc">Filter Function Reference</span></a>) was used to give the extrusion effect based on the US state’s population size.</p>
<p>The last step was to add an offset to the geometry producing the lighter grey areas as a top surface. The extrusion above works on each state from the ground up based on the population size. It is therefore necessary to offset the geometry in the Y axis with the same height used for the geometry extrusion. This adds the geometry at the top of the extrusion giving the effect of a top surface.</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">@</span><span class="k">mode</span> <span class="s2">&quot;Flat&quot;</span><span class="p">;</span>
<span class="c">/* EXTRUDING THE POLYGON */</span>
<span class="o">*</span> <span class="p">{</span>
  <span class="n">fill</span><span class="p">:</span> <span class="mh">#7B7B7B</span><span class="p">;</span>
  <span class="n">fill-geometry</span><span class="p">:</span> <span class="p">[</span><span class="nf">isometric</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span> <span class="n">PERSONS</span><span class="o">/</span><span class="mi">8</span><span class="n">M</span><span class="p">)];</span>
  <span class="n">stroke</span><span class="p">:</span> <span class="mh">#636363</span><span class="p">;</span>
  <span class="n">stroke-geometry</span><span class="p">:</span> <span class="p">[</span><span class="nf">isometric</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span> <span class="n">PERSONS</span><span class="o">/</span><span class="mi">8</span><span class="n">M</span><span class="p">)];</span>
  <span class="n">stroke-opacity</span><span class="p">:</span><span class="mf">0.7</span><span class="p">;</span>
  <span class="n">sort-by</span><span class="p">:</span> <span class="n">PERSONS</span><span class="p">;</span>
  <span class="k">z-index</span><span class="p">:</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="c">/* ADDING TOP SURFACE */</span>
<span class="o">*</span> <span class="p">{</span>
  <span class="n">fill-geometry</span><span class="p">:</span> <span class="p">[</span><span class="nf">offset</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERSONS</span><span class="o">/</span><span class="mi">8</span><span class="n">M</span><span class="p">)];</span>
  <span class="n">stroke-geometry</span><span class="p">:</span> <span class="p">[</span><span class="nf">offset</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERSONS</span><span class="o">/</span><span class="mi">8</span><span class="n">M</span><span class="p">)];</span>
  <span class="n">fill</span><span class="p">:</span> <span class="mh">#CACCCD</span><span class="p">;</span>
  <span class="n">stroke</span><span class="p">:</span> <span class="mh">#000000</span><span class="p">;</span>
  <span class="n">stroke-opacity</span><span class="p">:</span> <span class="mf">0.7</span><span class="p">;</span>
  <span class="n">sort-by</span><span class="p">:</span> <span class="n">PERSONS</span><span class="p">;</span>
  <span class="k">z-index</span><span class="p">:</span><span class="mi">0</span><span class="p">;</span>
  <span class="n">label</span><span class="p">:</span> <span class="p">[</span><span class="n">STATE_ABBR</span><span class="p">];</span>
  <span class="k">font-family</span><span class="p">:</span> <span class="s1">&#39;Dialog&#39;</span><span class="p">;</span>
  <span class="k">font-weight</span><span class="p">:</span> <span class="s1">&#39;Bold&#39;</span><span class="p">;</span>
  <span class="n">halo-color</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span>
  <span class="n">halo-radius</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure align-center">
<img alt="../../../_images/extrude_usa.png" src="../../../_images/extrude_usa.png" />
</div>
<div class="section" id="footnote">
<h3>Footnote<a class="headerlink" href="#footnote" title="Permalink to this headline">¶</a></h3>
<p>Using the population size to sort the rendering order causes some states (e.g. New York) to almost entirely overlay another state (in this case, Pennsylvania.) A better implementation might be to add a field containing the x value of the centroid and use this field in the sort-by clause in descending order i.e. (sort-by: centroid_x D).</p>
</div>
</div>
</div>


        <div class="selfclear pagination-nav">
            <div class="leftwise"><strong>Previous</strong>: <a href="transformation.html" title="previous chapter">Using transformation functions</a></div>
            <div class="rightwise"><strong>Next</strong>: <a href="kml.html" title="next chapter">KML</a></div>
        </div>
        </div><!-- /#content> -->
        <div id="content-right" class="content-border"></div>
        
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix"><a href="../../../index.html">Table Of Contents</a></h3>
        <ul>
<li><a class="reference internal" href="#">Example of 2.5D extrusion</a><ul>
<li><a class="reference internal" href="#extruding-a-geometry">Extruding a geometry</a><ul>
<li><a class="reference internal" href="#footnote">Footnote</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="transformation.html" title="previous chapter">Using transformation functions</a></li>
            <li>Next: <a href="kml.html" title="next chapter">KML</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
        
        <li><a href="https://github.com/geoserver/geoserver/tree/main/doc/en/user/source/styling/css/examples/extrude.rst">Edit</a></li>
        </ul>
        </div>
      <div class="section">
        <h3>Known GeoServer issues</h3>
        <ul class="this-page-menu">
          <li><a href="https://osgeo-org.atlassian.net/projects/GEOS/summary">Jira issue tracker</a></li>
        </ul>
      </div>
  </div><!-- /#sidebar -->
    </div><!-- /.wrap> -->
  </div><!-- /#main -->
<div id="footer">
    <div class="wrap">
        &copy; Copyright 2023, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
        Last updated on Jun 18, 2023.
        Created using <a href="http://www.sphinx-doc.org/">Sphinx</a>.
    </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>